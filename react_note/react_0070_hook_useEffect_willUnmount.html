<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Add React in One Minute</title>
  <script src="js/react.development.js"></script>
  <script src="js/react-dom.development.js"></script>
  <script src="js/babel.min.js"></script>
  <script src="https://unpkg.com/prop-types@15.6/prop-types.js"></script>
</head>

<body>
  数据获取，设置订阅以及手动更改 React 组件中的 DOM 都属于反作用。有些反作用可能须要清除，因此须要返回一个函数，好比挂载时设置定时器，卸载时取消定时器。函数
  <div id="root"></div>
  <script type="text/babel">
    //class方式实现的定时器
    class Example1 extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          counter: 0
        };
      }
      //组件加载后执行的函数,开启定时器
      componentDidMount() {
        this.id=setInterval(()=>
          {this.setState({counter:this.state.counter+1})},
          1000);
      }
      //组件即将卸载时去掉定时器
      componentWillUnmount() {
        clearInterval(this.id);
      }
      render() {
        return (
          <div>
            计数器:{this.state.counter} 次
          </div>
        )
      }
    }
    //hook的实现方式,可以将定时器的加载和销毁放在一段代码块中执行，而class的方式则需要放在不同的函数中执行
    function Example2() {
      const [count, setCount] = React.useState(0);
      React.useEffect(() => {
      //组件加载后和更新后执行的函数  
      const id=setInterval(()=>{
        setCount(count+1);},1000);
      //组件即将卸载时执行的函数
      return ()=>{clearInterval(id)};
      },[]);
      return (
        <div>
          计时器:{count} 次
        </div>
      )
    }
    ReactDOM.render(<Example2/>, document.getElementById('root'));
  </script>
</body>

</html>